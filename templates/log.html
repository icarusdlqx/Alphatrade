{% extends "base.html" %}
{% block content %}
<h4>Trading Log</h4>
<p class="muted">Real-time trading activity and system events. Most recent entries first.</p>
<table role="grid">
  <thead><tr><th>Time</th><th>Event</th><th>Details</th></tr></thead>
  <tbody>
    {% for r in rows %}
      <tr class="lev-{{ r.level }}">
        <td>{{ r.at }}</td>
        <td>
          {% if r.level == 'ORDER' %}<strong>Order Submitted</strong>
          {% elif r.event == 'analysis_summary' %}
            {% if r.detail.decision == 'orders_submitted' %}<strong>Orders Submitted</strong>
            {% elif r.detail.decision == 'hold' %}Hold / No Orders
            {% elif r.detail.decision == 'no_orders' %}No Orders
            {% elif r.detail.decision == 'no_new_positions' %}No New Positions
            {% elif r.detail.decision == 'dry_run_only' %}Dryâ€‘run Only
            {% else %}Analysis Summary{% endif %}
          {% elif r.event == 'outside_window' %}Outside Trading Window
          {% elif r.event == 'market_closed_or_near_bell' %}Market Closed / Near Bell
          {% elif r.event == 'run_start' %}Analysis Started
          {% elif r.event == 'account_snapshot' %}Account Update
          {% elif r.event == 'regime_detail' %}Market Regime Check
          {% elif r.event == 'picks_model' or r.event == 'picks_detail' %}AI Portfolio Selection
          {% else %}{{ r.event|replace('_',' ')|title }}{% endif %}
        </td>
        <td><code style="white-space:pre-wrap">{{ r.detail }}</code></td>
      </tr>
    {% else %}
      <tr><td colspan="3">No log entries yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}